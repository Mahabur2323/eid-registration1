<!DOCTYPE html>
<html lang="bn">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡¶Ü‡¶á‡¶π‡¶æ‡¶á ‡¶â‡¶ö‡ßç‡¶ö ‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡¶æ‡¶≤‡ßü - ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶®</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: url('https://i.postimg.cc/fRNqtVHH/Capture.png') no-repeat center center fixed;
      background-size: cover;
      margin: 0;
      padding: 0;
    }

    header {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      padding: 25px 20px;
      background-color: rgba(10, 25, 47, 0.9);
      border-bottom: 4px solid #ffffffaa;
      border-radius: 0 0 8px 8px;
    }

    header img {
      height: 60px;
      width: 60px;
      border-radius: 50%;
      border: 2px solid #fff;
      box-shadow: 0 0 10px #00d4ff;
    }

    header h1 {
      font-size: 32px;
      color: #ffffff;
      text-shadow: 1px 1px 5px #00d4ff;
      margin: 0;
      letter-spacing: 1px;
    }

    form {
      max-width: 500px;
      background-color: rgba(255, 255, 255, 0.95);
      margin: 20px auto;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
    }

    label {
      font-weight: bold;
      display: block;
      margin: 15px 0 5px;
    }

    input[type="text"],
    select,
    input[type="tel"] {
      width: 100%;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 16px;
    }

    input[readonly] {
      background-color: #e9ecef;
    }

    input[type="submit"] {
      background-color: #28a745;
      color: white;
      padding: 12px;
      margin-top: 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      width: 100%;
      font-size: 18px;
    }

    input[type="submit"]:hover {
      background-color: #218838;
    }

    .admin-reset {
      text-align: center;
      margin-top: 20px;
    }

    .admin-reset button {
      background-color: #dc3545;
      color: white;
      padding: 10px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
    }

    .admin-reset button:hover {
      background-color: #c82333;
    }

    .thank-you {
      max-width: 500px;
      margin: 40px auto;
      padding: 30px;
      text-align: center;
      background-color: rgba(0, 128, 0, 0.85);
      color: white;
      border-radius: 12px;
      font-size: 20px;
      display: none;
    }

    .static-light-text {
      text-align: center;
      font-size: 28px;
      font-weight: bold;
      margin: 30px auto 60px;
      color: #fff;
      text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.6);
      animation: blinkColors 1s infinite;
    }

    @keyframes blinkColors {
      0% {
        color: #ff0000;
      }

      20% {
        color: #00ff00;
      }

      40% {
        color: #0000ff;
      }

      60% {
        color: #ffff00;
      }

      80% {
        color: #ff00ff;
      }

      100% {
        color: #00ffff;
      }
    }
  </style>
</head>

<body>

  <header>
    <img src="https://i.postimg.cc/CM49GHq3/484857702-2892954940878501-1043327302025993468-n.jpg" alt="School Logo">
    <h1>‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶´‡¶∞‡ßç‡¶Æ</h1>
  </header>

  <form id="registration-form" action="https://sheetdb.io/api/v1/7etk4by5v2c7d" method="post">
    <label for="name">‡¶õ‡¶æ‡¶§‡ßç‡¶∞/‡¶õ‡¶æ‡¶§‡ßç‡¶∞‡ßÄ‡¶∞ ‡¶®‡¶æ‡¶Æ:</label>
    <input type="text" name="data[NAME]" id="name" required />

    <label for="address">‡¶∏‡ßç‡¶•‡¶æ‡¶Ø‡¶º‡ßÄ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ:</label>
    <input type="text" name="data[ADDRESS]" id="address" required />

    <label for="ssc_year">‡¶è‡¶∏‡¶è‡¶∏‡¶∏‡¶ø ‡¶™‡¶æ‡¶∂‡ßá‡¶∞ ‡¶∏‡¶æ‡¶≤:</label>
    <div style="display: flex; align-items: center; gap: 10px;">
      <select name="data[SSC_YEAR]" id="ssc_year" required>
        <option value="">-- ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® --</option>
        <script>
          for (let year = 1995; year <= 2025; year++) {
            document.write(`<option value="${year}">${year}</option>`);
          }
        </script>
      </select>
      <label style="font-weight: normal; font-size: 14px;">
        <input type="checkbox" id="running-student" />
        ‡¶Ü‡¶Æ‡¶ø ‡¶è‡¶ñ‡¶®‡ßã ‡¶è‡¶∏‡¶è‡¶∏‡¶∏‡¶ø ‡¶™‡¶æ‡¶∏ ‡¶ï‡¶∞‡¶ø‡¶®‡¶ø
      </label>
    </div>

    <div id="class-select-box" style="display: none; margin-top: 10px;">
      <label for="student_class">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ:</label>
      <select name="data[CLASS]" id="student_class">
        <option value="">-- ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® --</option>
        <option value="‡¶∑‡¶∑‡ßç‡¶†">‡¶∑‡¶∑‡ßç‡¶†</option>
        <option value="‡¶∏‡¶™‡ßç‡¶§‡¶Æ">‡¶∏‡¶™‡ßç‡¶§‡¶Æ</option>
        <option value="‡¶Ö‡¶∑‡ßç‡¶ü‡¶Æ">‡¶Ö‡¶∑‡ßç‡¶ü‡¶Æ</option>
        <option value="‡¶®‡¶¨‡¶Æ">‡¶®‡¶¨‡¶Æ</option>
        <option value="‡¶¶‡¶∂‡¶Æ">‡¶¶‡¶∂‡¶Æ</option>
      </select>
    </div>

    <label for="participants">‡¶Ö‡¶Ç‡¶∂‡¶ó‡ßç‡¶∞‡¶π‡¶£‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ:</label>
    <select name="data[PARTICIPANTS]" id="participants" required>
      <option value="">-- ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® --</option>
      <script>
        for (let i = 1; i <= 10; i++) {
          document.write(`<option value="${i}">${i}</option>`);
        }
      </script>
    </select>

    <!-- Display total fee to user -->
    <label for="display_fee">‡¶Æ‡ßã‡¶ü ‡¶ö‡¶æ‡¶Å‡¶¶‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ (‡ß≥):</label>
    <input type="text" id="display_fee" readonly />

    <!-- Submit total fee to Google Sheet -->
    <input type="hidden" name="data[TOTAL_FEE]" id="total_fee_input" />

    <label for="phone">‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞:</label>
    <input type="tel" name="data[PHONE]" id="phone" maxlength="11" pattern="[0-9]{11}" required />

    <label>‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂/‡¶®‡¶ó‡¶¶ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ (‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®):</label>
    <div style="font-size: 18px; margin-bottom: 10px;">
      <strong>01794725919</strong>
    </div>

    <label for="txn_id">‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ (Transaction ID):</label>
    <input type="text" name="data[TXN_ID]" id="txn_id" required />

    <input type="submit" value="‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®" />
  </form>

  <div id="thank-you" class="thank-you">
    üéâ ‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶ ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø!
  </div>

  <div class="static-light-text">‡¶Ü‡¶á‡¶π‡¶æ‡¶á ‡¶â‡¶ö‡ßç‡¶ö ‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡¶æ‡¶≤‡ßü</div>

  <div class="admin-reset">
    <button onclick="showResetPrompt()">‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶Ø‡¶º ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶® (‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)</button>
  </div>

  <script>
    const form = document.getElementById("registration-form");
    const thankYouMessage = document.getElementById("thank-you");
    const sscYearSelect = document.getElementById("ssc_year");
    const participantsSelect = document.getElementById("participants");
    const displayFeeInput = document.getElementById("display_fee");
    const hiddenFeeInput = document.getElementById("total_fee_input");

    if (localStorage.getItem("formSubmitted")) {
      form.style.display = "none";
      thankYouMessage.style.display = "block";
    }

    document.getElementById("running-student").addEventListener("change", function () {
      const sscSelect = document.getElementById("ssc_year");
      const classBox = document.getElementById("class-select-box");

      if (this.checked) {
        sscSelect.disabled = true;
        sscSelect.required = false;
        classBox.style.display = "block";
        document.getElementById("student_class").required = true;
        displayFeeInput.value = "";
        hiddenFeeInput.value = "";
      } else {
        sscSelect.disabled = false;
        sscSelect.required = true;
        classBox.style.display = "none";
        document.getElementById("student_class").required = false;
        updateFeeDisplay();
      }
    });

    let baseFee = 0;

    function updateFeeDisplay() {
      const year = parseInt(sscYearSelect.value);
      const participants = parseInt(participantsSelect.value);

      if (!isNaN(year)) {
        baseFee = (year >= 1995 && year <= 2015) ? 500 : 250;
      } else {
        baseFee = 0;
      }

      let totalFee = baseFee;

      if (!isNaN(participants) && baseFee > 0) {
        totalFee = baseFee * participants;
        displayFeeInput.value = totalFee;
        hiddenFeeInput.value = totalFee;
      } else {
        displayFeeInput.value = '';
        hiddenFeeInput.value = '';
      }
    }

    sscYearSelect.addEventListener("change", updateFeeDisplay);
    participantsSelect.addEventListener("change", updateFeeDisplay);

    form.addEventListener("submit", function (e) {
      e.preventDefault();

      updateFeeDisplay(); // Ensure fee is updated before submit

      const phone = document.getElementById("phone").value;
      const txnId = document.getElementById("txn_id").value.trim();

      if (phone.length !== 11 || !/^\d+$/.test(phone)) {
        alert("‡¶∏‡¶†‡¶ø‡¶ï ‡ßß‡ßß ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶®!");
        return;
      }

      if (txnId === "") {
        alert("‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ (Transaction ID) ‡¶¶‡¶ø‡¶®!");
        return;
      }

      fetch(form.action, {
        method: "POST",
        body: new FormData(form),
      })
        .then((response) => response.json())
        .then((data) => {
          localStorage.setItem("formSubmitted", "true");
          form.reset();
          form.style.display = "none";
          thankYouMessage.style.display = "block";
        })
        .catch((error) => {
          alert("‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
          console.error(error);
        });
    });

    function showResetPrompt() {
      const adminPassword = "eid2025";
      const input = prompt("‡¶ó‡ßã‡¶™‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®:");

      if (input === adminPassword) {
        localStorage.removeItem("formSubmitted");
        alert("‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶Ø‡¶º ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá ‚úÖ");
        location.reload();
      } else {
        alert("‡¶≠‡ßÅ‡¶≤ ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°! üö´");
      }
    }
  </script>
</body>

</html>
